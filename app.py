import gradio as gr

theme = gr.themes.Soft(
    primary_hue="teal",
    secondary_hue="gray",
    font=[gr.themes.GoogleFont("Libre Franklin"), "Arial", "sans-serif"]
)

def lanch_language_model_server(callback_generate_response, share: bool = False):
    with gr.Blocks(theme=theme, title="LLM Playground") as demo:
        gr.Markdown("# üß† Language Model Playground")
        gr.Markdown("Configure generation parameters and experiment with the model!")
        
        with gr.Row():
            # –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –≤–≤–æ–¥–æ–º –∏ –≤—ã–≤–æ–¥–æ–º
            with gr.Column(scale=3):
                input_prompt = gr.Textbox(
                    label="Input Prompt",
                    placeholder="Enter your text here...",
                    lines=8,
                    elem_id="prompt-box"
                )
                prefix = gr.Textbox(
                    label="Instruction Prefix",
                    value="–†–µ–∑—é–º–∏—Ä—É–π —Ç–µ–∫—Å—Ç, —Å–æ—Ö—Ä–∞–Ω–∏ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –≤ –∫—Ä–∞—Ç–∫–æ–º –æ–±—ä—ë–º–µ.",
                    placeholder="Add custom instruction prefix..."
                )
                examples = gr.Examples(
                    examples=[
                        ['–í –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥–µ –Ω–∞ 82-–º –≥–æ–¥—É –∂–∏–∑–Ω–∏ —Å–∫–æ–Ω—á–∞–ª—Å—è —Å–æ–≤–µ—Ç—Å–∫–∏–π –∏ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –¥–µ—Ç—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å –í–ª–∞–¥–∏—Å–ª–∞–≤ –ö—Ä–∞–ø–∏–≤–∏–Ω. –û–± —ç—Ç–æ–º —Å–æ–æ–±—â–∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏ –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ —Ä–µ–≥–∏–æ–Ω–∞. ¬´–î–∞. –°–µ–≥–æ–¥–Ω—è¬ª, ‚Äî —Ü–∏—Ç–∏—Ä—É–µ—Ç –ø—Ä–µ—Å—Å-—Å–ª—É–∂–±—É –ú–∏–Ω–∑–¥—Ä–∞–≤–∞ –†–ò–ê ¬´–ù–æ–≤–æ—Å—Ç–∏¬ª. –°–æ–≥–ª–∞—Å–Ω–æ –Ω–µ–≤–µ—Å—Ç–∫–µ –ö—Ä–∞–ø–∏–≤–∏–Ω–∞ –õ–∞—Ä–∏—Å–µ, –ø–∏—Å–∞—Ç–µ–ª—å —É–º–µ—Ä —É—Ç—Ä–æ–º 1 —Å–µ–Ω—Ç—è–±—Ä—è –ø–æ –º–µ—Å—Ç–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. ¬´–£–º–µ—Ä –≤ 06:40. –ï–º—É —Å—Ç–∞–ª–æ —Ö—É–∂–µ, –Ω–æ—á—å—é –æ—Ç–≤–µ–∑–ª–∏ –≤ —Ä–µ–∞–Ω–∏–º–∞—Ü–∏—é ‚Äî –∏ –≤—Å–µ¬ª, ‚Äî –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–µ —Å–ª–æ–≤–∞ –¢–ê–°–°. –†–∞–Ω–µ–µ –õ–∞—Ä–∏—Å–∞ –≤ —Å–≤–æ–µ–º Facebook —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∞, —á—Ç–æ –ö—Ä–∞–ø–∏–≤–∏–Ω –±—ã–ª –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω 15 –∏—é–ª—è. –ö–∞–∫ —Ç–æ–≥–¥–∞ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–ª–∞ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏—Ü–∞, —Ä–µ—à–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å–∞—Ç–µ–ª—è –≤ –≥–æ—Å–ø–∏—Ç–∞–ª—å –±—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞ —Ñ–æ–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω ¬´–≤–Ω–µ–∑–∞–ø–Ω–æ —É–ø–∞–ª —É—Ç—Ä–æ–º, –≤—Å—Ç–∞–≤ —Å –∫—Ä–æ–≤–∞—Ç–∏¬ª. ¬´–û–Ω –±—ã–ª –≤ —Å–æ–∑–Ω–∞–Ω–∏–∏, —Ö–æ—Ç—è –∏ –ø–ª–æ—Ö–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª. –ò –±—ã–ª–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ –∏–Ω—Å—É–ª—å—Ç. –ë—ã–ª–∞ —Å—Ä–æ—á–Ω–æ –≤—ã–∑–≤–∞–Ω–∞ —Å–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å. [–í –±–æ–ª—å–Ω–∏—Ü–µ –µ–º—É] —Å–¥–µ–ª–∞–ª–∏ –ö–¢ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–æ–∑–≥–∞ –∏ –ª–µ–≥–∫–∏—Ö, –∫–∞—Ä–¥–∏–æ–≥—Ä–∞–º–º—É –∏ –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, —Å–µ–º—å–µ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –∏–Ω—Å—É–ª—å—Ç–∞ –∏ –∏–Ω—Ñ–∞—Ä–∫—Ç–∞ –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ COVID, –ø–æ—Ç–æ–º—É —á—Ç–æ –ö–¢ –ª–µ–≥–∫–∏—Ö –ø–æ–∫–∞–∑–∞–ª–∞ –Ω–∞–ª–∏—á–∏–µ –ø–Ω–µ–≤–º–æ–Ω–∏–∏ —Å 25% –ø–æ—Ä–∞–∂–µ–Ω–∏—è¬ª, ‚Äî –ø–æ–¥—á–µ—Ä–∫–Ω—É–ª–∞ –Ω–µ–≤–µ—Å—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∞. –û–Ω–∞ —Ç–∞–∫–∂–µ –æ—Ç–º–µ—Ç–∏–ª–∞, —á—Ç–æ –ö—Ä–∞–ø–∏–≤–∏–Ω, —Ç–µ—Å—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞ –∫–æ—Ä–æ–Ω–∞–≤–∏—Ä—É—Å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—ã–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏, –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ–ª –≤ COVID-–æ—Ç–¥–µ–ª–µ–Ω–∏–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∂–µ–Ω—â–∏–Ω–∞ –≤—ã—Ä–∞–∑–∏–ª–∞ –º–Ω–µ–Ω–∏–µ, —á—Ç–æ –≤—Ä–∞—á–∏ ¬´–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª–∏ [—É –ø–∏—Å–∞—Ç–µ–ª—è] –∏–Ω—Å—É–ª—å—Ç, –∫–æ—Ç–æ—Ä—ã–π, –≤–∏–¥–∏–º–æ, –≤—Å–µ-—Ç–∞–∫–∏ —Å–ª—É—á–∏–ª—Å—è¬ª. –°–æ–≥–ª–∞—Å–Ω–æ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏—Ü–µ, –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –∞–≤—Ç–æ—Ä –±—ã–ª –≤—ã–ø–∏—Å–∞–Ω –∏–∑ –±–æ–ª—å–Ω–∏—Ü—ã 7 –∞–≤–≥—É—Å—Ç–∞, –ø—Ä–∏ —ç—Ç–æ–º –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—ã–ª–æ ¬´–Ω–∞–º–Ω–æ–≥–æ —Ö—É–∂–µ, —á–µ–º —Ç—Ä–∏ –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥¬ª. ¬´–û–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–æ–æ–±—â–µ –Ω–µ –º–æ–∂–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è. –£ –Ω–µ–≥–æ –Ω–∞ –Ω–æ–≥–µ –æ–≥—Ä–æ–º–Ω–∞—è –≥–µ–º–∞—Ç–æ–º–∞ ‚Äî –∏ –≤—Å—è –Ω–æ–≥–∞ —Å–∏–Ω—è—è. –í —Ä–∞–π–æ–Ω–µ –ø–∞—Ö–∞ –±–æ–ª—å—à–∞—è —à–∏—à–∫–∞. –ù–∞ —Å–ø–∏–Ω–µ –ø—Ä–æ–ª–µ–∂–Ω–∏. –í—Å–µ —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∞–¥—Å–∫—É—é –±–æ–ª—å –∏ –º—É—á–µ–Ω–∏—è. –û–Ω –≤—Å–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å–∏—Ç –ø–∏—Ç—å. –ï—Å—Ç —Å –±–æ–ª—å—à–∏–º —Ç—Ä—É–¥–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–¥–µ—Ç —Ä–≤–æ—Ç–∞. –° –Ω–∞–º–∏ –æ–±—â–∞–µ—Ç—Å—è, –Ω–æ –±–æ–ª—å—à–µ —Å–ø–∏—Ç¬ª, ‚Äî –¥–µ–ª–∏–ª–∞—Å—å –õ–∞—Ä–∏—Å–∞ 9 –∞–≤–≥—É—Å—Ç–∞. –£–∂–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø–∏—Å–∞—Ç–µ–ª—å –±—ã–ª –≤–Ω–æ–≤—å –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –ê 12 –∞–≤–≥—É—Å—Ç–∞ –ö—Ä–∞–ø–∏–≤–∏–Ω—É –±—ã–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è: ¬´–ì–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –∏–∑ –Ω–æ–≥–∏ —Ö–∏—Ä—É—Ä–≥–∏ –æ—Ç–∫–∞—á–∞–ª–∏ 1,5 –ª–∏—Ç—Ä–∞ –Ω–µ—Ö–æ—Ä–æ—à–µ–π —Å–∫–æ–ø–∏–≤—à–µ–π—Å—è –∂–∏–¥–∫–æ—Å—Ç–∏¬ª. –í–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –õ–∞—Ä–∏—Å–∞ –ø–∏—Å–∞–ª–∞, —á—Ç–æ –ø–æ—Å–ª–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ —É—Ö—É–¥—à–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ö—Ä–∞–ø–∏–≤–∏–Ω –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è –ª—É—á—à–µ. –í–º–µ—Å—Ç–µ —Å —Ç–µ–º 31 –∞–≤–≥—É—Å—Ç–∞ –∂–µ–Ω—â–∏–Ω–∞, —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ –≤—Ä–∞—á–µ–π, –∑–∞—è–≤–∏–ª–∞ Ura.Ru , —á—Ç–æ –ø–∏—Å–∞—Ç–µ–ª—å –≤—Å–µ –∂–µ –ø–µ—Ä–µ–±–æ–ª–µ–ª –∫–æ—Ä–æ–Ω–∞–≤–∏—Ä—É—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∏ ¬´—Å–ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞–ª –æ—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –±–æ–ª—è—á–µ–∫, –≤–∫–ª—é—á–∞—è –¥–∏–∞–±–µ—Ç, —Å–µ—Ä–¥—Ü–µ –∏ –∏–Ω—Å—É–ª—å—Ç—ã¬ª. –ü–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –ø—Ä–∏—á–∏–Ω–æ–π —Å–º–µ—Ä—Ç–∏ –∞–≤—Ç–æ—Ä–∞ —Å—Ç–∞–ª–æ –æ–±–æ—Å—Ç—Ä–µ–Ω–∏–µ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö –±–æ–ª–µ–∑–Ω–µ–π –Ω–∞ —Ñ–æ–Ω–µ COVID-19. –°–æ–±–æ–ª–µ–∑–Ω–æ–≤–∞–Ω–∏—è –≤ —Å–≤—è–∑–∏ —Å –∫–æ–Ω—á–∏–Ω–æ–π –ø–∏—Å–∞—Ç–µ–ª—è –≤—ã—Ä–∞–∑–∏–ª –≥—É–±–µ—Ä–Ω–∞—Ç–æ—Ä –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –ï–≤–≥–µ–Ω–∏–π –ö—É–π–≤–∞—à–µ–≤. ¬´–≠—Ç–æ —Ç—è–∂–µ–ª–∞—è, —Å–∫–æ—Ä–±–Ω–∞—è, –Ω–µ–≤–æ—Å–ø–æ–ª–Ω–∏–º–∞—è —É—Ç—Ä–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å. –í–ª–∞–¥–∏—Å–ª–∞–≤ –ö—Ä–∞–ø–∏–≤–∏–Ω —à–∏—Ä–æ–∫–æ –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ –∞–≤—Ç–æ—Ä –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –¥–ª—è –¥–µ—Ç–µ–π –∏ —é–Ω–æ—à–µ—Å—Ç–≤–∞. –ü–æ—á—Ç–∏ –≤ –∫–∞–∂–¥–æ–π —Ä–æ—Å—Å–∏–π—Å–∫–æ–π —Å–µ–º—å–µ –µ—Å—Ç—å –∫–Ω–∏–≥–∏ –í–ª–∞–¥–∏—Å–ª–∞–≤–∞ –ü–µ—Ç—Ä–æ–≤–∏—á–∞, —É—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ –∏–¥–µ–∞–ª—ã –¥–æ–±—Ä–∞ –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏, –ø—Ä–æ–Ω–∏–∫–Ω—É—Ç—ã–µ –¥—É—Ö–æ–º —Ä–æ–º–∞–Ω—Ç–∏–∑–º–∞ –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π, –ø–æ–¥–Ω–∏–º–∞—é—â–∏–µ –≤–∞–∂–Ω–µ–π—à–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ –∏ –Ω—Ä–∞–≤—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, ‚Äî –≥–æ–≤–æ—Ä–∏—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –Ω–∞ –ø–æ—Ä—Ç–∞–ª–µ –≥—É–±–µ—Ä–Ω–∞—Ç–æ—Ä–∞. ‚Äî –í–ª–∞–¥–∏—Å–ª–∞–≤–∞ –ü–µ—Ç—Ä–æ–≤–∏—á–∞ –ö—Ä–∞–ø–∏–≤–∏–Ω–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –ø–æ–º–Ω–∏—Ç—å, –∫–∞–∫ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤–æ–≥–æ, —á–µ—Å—Ç–Ω–æ–≥–æ, –Ω–µ—Ä–∞–≤–Ω–æ–¥—É—à–Ω–æ–≥–æ –∫–æ –≤—Å—è–∫–æ–π –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞. –ò–º –≤–æ—Å—Ö–∏—â–∞–ª–∏—Å—å, –µ–º—É –≤–µ—Ä–∏–ª–∏, –µ–≥–æ —É–≤–∞–∂–∞–ª–∏ –∏ –ª—é–±–∏–ª–∏¬ª. –í–ª–∞–¥–∏—Å–ª–∞–≤ –ö—Ä–∞–ø–∏–≤–∏–Ω —Ä–æ–¥–∏–ª—Å—è 14 –æ–∫—Ç—è–±—Ä—è 1938 –≥–æ–¥–∞ –≤ –¢—é–º–µ–Ω–∏. –ù–∞ –µ–≥–æ —Å—á–µ—Ç—É —Ç–∞–∫–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –∫–∞–∫ ¬´–ú–∞–ª—å—á–∏–∫ —Å–æ —à–ø–∞–≥–æ–π¬ª, ¬´–ñ—É—Ä–∞–≤–ª–µ–Ω–æ–∫ –∏ –º–æ–ª–Ω–∏–∏¬ª, ¬´–¢—Ä–æ–µ —Å –ø–ª–æ—â–∞–¥–∏ –ö–∞—Ä—Ä–æ–Ω–∞–¥¬ª, ¬´–ö–æ–ª—ã–±–µ–ª—å–Ω–∞—è –¥–ª—è –±—Ä–∞—Ç–∞¬ª –∏ ¬´–ë–æ–ª—Ç–∏–∫¬ª, —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ—Ä–∞ —Ç–∞–∫–∂–µ –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ —ç–∫—Ä–∞–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å. –ü–æ–º–∏–º–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ö—Ä–∞–ø–∏–≤–∏–Ω –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ –ø–µ–¥–∞–≥–æ–≥: –≤ –Ω–∞—á–∞–ª–µ 1960-—Ö –æ–Ω –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª –≤ –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–µ –¥–µ—Ç—Å–∫–∏–π –æ—Ç—Ä—è–¥ ¬´–ö–∞—Ä–∞–≤–µ–ª–ª–∞¬ª, –∫–æ—Ç–æ—Ä—ã–º –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ —Ä—É–∫–æ–≤–æ–¥–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–π.', "–†–µ–∑—é–º–∏—Ä—É–π —Ç–µ–∫—Å—Ç, —Å–æ—Ö—Ä–∞–Ω–∏ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω—ë–º –≤ –∫—Ä–∞—Ç–∫–æ–º –æ–±—ä—ë–º–µ"],
                    ],
                    inputs=[input_prompt, prefix],
                    label="Example Prompts"
                )
                output_text = gr.Textbox(
                    label="Generated Output",
                    elem_id="output-box",
                    interactive=False,
                    lines=12
                )
            
            # –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π
            with gr.Column(scale=1):
                with gr.Accordion("Generation Parameters", open=True):
                    max_new_tokens = gr.Slider(
                        label="Max New Tokens",
                        minimum=32,
                        maximum=256,
                        value=512,
                        step=16
                    )
                    temperature = gr.Slider(
                        label="Temperature",
                        minimum=0.1,
                        maximum=1.0,
                        value=0.7,
                        step=0.1
                    )
                    top_p = gr.Slider(
                        label="Top-p (Nucleus Sampling)",
                        minimum=0.1,
                        maximum=1.0,
                        value=0.95,
                        step=0.05
                    )
                    top_k = gr.Slider(
                        label="Top-k",
                        minimum=1,
                        maximum=100,
                        value=50,
                        step=1
                    )
                    repetition_penalty = gr.Slider(
                        label="Repetition Penalty",
                        minimum=0.1,
                        maximum=1.9,
                        value=1.2,
                        step=0.1
                    )
                    num_beams = gr.Slider(
                        label="Beam Search Size",
                        minimum=1,
                        maximum=8,
                        value=4,
                        step=1,
                        visible=False
                    )
                    do_sample = gr.Checkbox(
                        label="Enable Sampling",
                        value=True
                    )
                    skip_special = gr.Checkbox(
                        label="Skip Special Tokens",
                        value=True
                    )
                
                submit_btn = gr.Button("Generate", variant="primary")
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        do_sample.change(
            lambda x: gr.update(visible=not x),
            inputs=do_sample,
            outputs=num_beams
        )
        
        submit_btn.click(
            callback_generate_response,
            inputs=[
                input_prompt,
                prefix,
                max_new_tokens,
                temperature,
                top_p,
                top_k,
                repetition_penalty,
                skip_special,
                num_beams,
                do_sample
            ],
            outputs=output_text
        )
        
        input_prompt.submit(
            callback_generate_response,
            inputs=[
                input_prompt,
                prefix,
                max_new_tokens,
                temperature,
                top_p,
                top_k,
                repetition_penalty,
                skip_special,
                num_beams,
                do_sample
            ],
            outputs=output_text
        )
    
    demo.launch(share=share)